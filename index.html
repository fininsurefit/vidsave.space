<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VidsSave.space - Free HD Video Downloader</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- RESET & VARIABLES --- */
        :root {
            --primary: #00CBA9; 
            --dark: #333;
            --light-bg: #f3f6f9;
            --white: #fff;
            --mp3-color: #f1c40f; /* Yellow for Audio */
            --mp4-color: #e67e22; /* Orange for Video */
            --btn-border: #2ecc71; /* Green Border */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Roboto', sans-serif; background: var(--light-bg); color: var(--dark); }

        /* --- NAVBAR --- */
        nav {
            background: var(--white);
            padding: 15px 5%;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex; justify-content: space-between; align-items: center;
        }
        .logo { font-size: 22px; font-weight: 800; color: var(--dark); text-decoration: none; }
        .logo span { color: var(--primary); }

        /* --- HERO SECTION --- */
        .hero {
            background: var(--white);
            padding: 40px 20px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }
        .hero h1 { font-size: 24px; margin-bottom: 10px; }
        
        .search-box {
            max-width: 600px;
            margin: 20px auto;
            position: relative;
            display: flex;
            border: 2px solid var(--primary);
            border-radius: 50px;
            overflow: hidden;
            background: #fff;
        }
        input {
            flex: 1; padding: 15px; border: none; outline: none; font-size: 16px;
        }
        .btn-go {
            background: var(--primary); color: white; border: none; padding: 0 25px;
            font-weight: bold; cursor: pointer;
        }
        
        #loader { display: none; margin-top: 15px; color: var(--primary); font-weight: bold; }

        /* --- RESULT LAYOUT (SCREENSHOT STYLE) --- */
        #result-area {
            max-width: 900px;
            margin: 30px auto;
            padding: 0 15px;
        }

        .result-card {
            background: var(--white);
            border-radius: 8px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.08);
            display: flex; /* Side by Side layout */
            flex-wrap: wrap; /* Mobile responsive */
            overflow: hidden;
            border: 1px solid #e1e1e1;
        }

        /* LEFT SIDE: THUMBNAIL */
        .card-left {
            flex: 1;
            min-width: 300px;
            padding: 20px;
            background: #000;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .thumb-img {
            width: 100%;
            max-width: 250px;
            border-radius: 10px;
            border: 2px solid #555;
            margin-bottom: 15px;
        }
        .video-title { font-size: 16px; line-height: 1.4; margin-bottom: 10px; font-weight: 500; }
        .video-meta { color: #aaa; font-size: 13px; }

        /* RIGHT SIDE: DOWNLOAD LIST */
        .card-right {
            flex: 1.5;
            min-width: 300px;
            padding: 0;
            border-left: 1px solid #eee;
        }

        /* CATEGORY HEADERS */
        .section-header {
            padding: 12px 20px;
            background: #f9f9f9;
            font-weight: 700;
            font-size: 16px;
            border-bottom: 1px solid #eee;
            border-top: 1px solid #eee;
            color: #444;
            display: flex; align-items: center; gap: 8px;
        }
        .section-header i { color: var(--btn-border); }
        .section-header:first-child { border-top: none; }

        /* LIST ITEMS */
        .dl-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            border-bottom: 1px solid #eee;
        }
        .dl-item:last-child { border-bottom: none; }

        /* TAGS (MP3/MP4) */
        .tag {
            padding: 3px 6px;
            border-radius: 3px;
            color: white;
            font-weight: bold;
            font-size: 12px;
            margin-right: 8px;
        }
        .tag-mp3 { background: var(--mp3-color); }
        .tag-mp4 { background: var(--mp4-color); }

        .info-text { font-weight: 600; font-size: 14px; color: #555; }
        .size-text { font-size: 13px; color: #888; margin-left: 10px; font-weight: 400; }

        /* BUTTON STYLE (Green Outline) */
        .download-btn {
            background: white;
            color: var(--btn-border);
            border: 2px solid var(--btn-border);
            padding: 6px 15px;
            border-radius: 5px;
            font-weight: 700;
            font-size: 14px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: 0.2s;
            cursor: pointer;
        }
        .download-btn:hover {
            background: var(--btn-border);
            color: white;
        }
        .downloading .fa-download { display: none; }
        .downloading .fa-spinner { display: inline-block; }

        /* ERROR */
        .error-msg { 
            background: #ffeaa7; color: #d35400; 
            padding: 10px; margin: 20px auto; 
            max-width: 600px; border-radius: 5px; text-align: center;
        }

        /* Footer */
        footer { text-align: center; padding: 30px; color: #999; font-size: 12px; }

        /* Mobile Adjustments */
        @media (max-width: 600px) {
            .result-card { flex-direction: column; }
            .card-left { border-bottom: 5px solid var(--primary); }
            .card-right { border-left: none; }
            .dl-item { padding: 10px 15px; }
            .info-text { font-size: 13px; }
        }
    </style>
</head>
<body>

    <nav>
        <a href="#" class="logo"><i class="fas fa-play-circle" style="color:var(--primary);"></i> Vids<span>Save.space</span></a>
    </nav>

    <section class="hero">
        <h1>Video Downloader</h1>
        <div class="search-box">
            <input type="text" id="urlInput" placeholder="Paste link here..." oninput="handlePaste()">
            <button class="btn-go" onclick="fetchVideo()"><i class="fas fa-arrow-right"></i></button>
        </div>
        <div id="loader"><i class="fas fa-circle-notch fa-spin"></i> Processing...</div>
    </section>

    <div id="result-area"></div>

    <footer>&copy; 2026 VidsSave.space</footer>

    <script>
        let debounceTimer;
        
        function handlePaste() {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(() => {
                const url = document.getElementById('urlInput').value;
                if(url.length > 10 && url.includes("http")) fetchVideo();
            }, 1000);
        }

        async function fetchVideo() {
            const urlInput = document.getElementById('urlInput');
            const resultArea = document.getElementById('result-area');
            const loader = document.getElementById('loader');
            const url = urlInput.value.trim();

            if (!url) return;

            loader.style.display = 'block';
            resultArea.innerHTML = '';

            const apiKey = 'fa714c86ccmsh14d7483011d8231p1fae75jsnaaba55ce7db8'; 
            const endpoint = 'https://social-download-all-in-one.p.rapidapi.com/v1/social/autolink';

            try {
                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: { 'content-type': 'application/json', 'X-RapidAPI-Key': apiKey, 'X-RapidAPI-Host': 'social-download-all-in-one.p.rapidapi.com' },
                    body: JSON.stringify({ url: url })
                });

                const data = await response.json();
                loader.style.display = 'none';

                if (!data || (!data.medias && !data.url)) throw new Error("No video found");

                const title = data.title || "Downloaded Video";
                const thumbnail = data.thumbnail || "https://via.placeholder.com/300x200?text=No+Preview";
                const duration = data.duration ? `Duration: ${data.duration}` : '';

                // --- SEPARATE AUDIO & VIDEO LISTS ---
                let audioHTML = '';
                let videoHTML = '';

                // Helper to create Row
                const createRow = (quality, size, ext, url, typeClass) => {
                    const cleanTitle = title.replace(/[^a-zA-Z0-9]/g, "_").substring(0, 20);
                    const filename = `VidsSave_${cleanTitle}.${ext}`;
                    
                    return `
                    <div class="dl-item">
                        <div>
                            <span class="tag ${typeClass}">${ext.toUpperCase()}</span>
                            <span class="info-text">${quality}</span>
                            <span class="size-text">${size}</span>
                        </div>
                        <button class="download-btn" onclick="forceDownload('${url}', '${filename}', this)">
                            <i class="fas fa-download"></i> Download
                            <i class="fas fa-spinner fa-spin" style="display:none;"></i>
                        </button>
                    </div>`;
                };

                // Logic to filter API Data
                if (data.medias && data.medias.length > 0) {
                    data.medias.forEach(media => {
                        let q = media.quality || 'Standard';
                        let s = media.formattedSize || '';
                        let u = media.url;
                        let e = media.extension || 'mp4';

                        if (media.audioAvailable === false && e === 'mp4') return; // Skip mute videos if needed

                        if (e === 'mp3' || e === 'm4a') {
                            audioHTML += createRow(q, s, e, u, 'tag-mp3');
                        } else {
                            // Video
                            if(q === 'no_video') return;
                            videoHTML += createRow(q, s, e, u, 'tag-mp4');
                        }
                    });
                } else if (data.url) {
                    // Fallback Single Video
                    videoHTML += createRow('Standard', '', 'mp4', data.url, 'tag-mp4');
                }

                // --- RENDER FINAL CARD ---
                resultArea.innerHTML = `
                    <div class="result-card">
                        <div class="card-left">
                            <img src="${thumbnail}" class="thumb-img">
                            <div class="video-title">${title}</div>
                            <div class="video-meta">${duration}</div>
                        </div>

                        <div class="card-right">
                            ${audioHTML ? `
                                <div class="section-header">
                                    <i class="fas fa-music"></i> Music
                                </div>
                                ${audioHTML}
                            ` : ''}

                            ${videoHTML ? `
                                <div class="section-header">
                                    <i class="fas fa-video"></i> Video
                                </div>
                                ${videoHTML}
                            ` : ''}
                            
                            ${!audioHTML && !videoHTML ? '<div style="padding:20px;text-align:center;">No direct links found. Try another video.</div>' : ''}
                        </div>
                    </div>
                `;

            } catch (error) {
                loader.style.display = 'none';
                resultArea.innerHTML = `<div class="error-msg">‚ùå Video link not valid or Private.</div>`;
            }
        }

        async function forceDownload(url, filename, btn) {
            const icon = btn.querySelector('.fa-download');
            const spinner = btn.querySelector('.fa-spinner');
            
            btn.classList.add('downloading');
            if(icon) icon.style.display = 'none';
            if(spinner) spinner.style.display = 'inline-block';

            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error("Net Error");
                const blob = await response.blob();
                const blobUrl = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = blobUrl;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                window.URL.revokeObjectURL(blobUrl);
                document.body.removeChild(a);
            } catch (e) {
                window.open(url, '_blank');
            } finally {
                btn.classList.remove('downloading');
                if(icon) icon.style.display = 'inline-block';
                if(spinner) spinner.style.display = 'none';
            }
        }
    </script>
</body>
</html>
